<?xml version='1.0' encoding="utf-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
 
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/hardened/selinux/hb-selinux-conv-profile.xml,v 1.3 2005/08/06 20:56:20 pebenito Exp $ -->

<sections>
<section><title>Zmiana profilu</title>
<subsection><body>

<warn>SELinux jest wspierany jedynie na serwerach. Wsparcie dla stacji roboczych
pojawi się w przyszłości</warn>

<warn>SELinux wspiera jedynie systemy plików ext2/3, XFS oraz JFS. Inne systemy
plików nie posiadają pełnego wsparcia dla rozszerzonych atrybutów. To powinno
się zmienić w przyszłości.</warn>

<warn>Użytkownicy AMD64 powinni przekonwertować z 2005.0 lub nowszego profilu.</warn>

<impo>Jak zawsze, należy mieć przygotowane LiveCD, w razie gdyby coś poszło nie
tak jak powinno.</impo>

<p>Najpierw należy zmienić profil do profilu SELinux dla danej architektury:</p>

<pre caption="Zmiana profilu">
# <i>rm -f /etc/make.profile</i>

<comment>x86:</comment>
# <i>ln -sf /usr/portage/profiles/selinux/2005.1/x86 /etc/make.profile</i>
<comment>PPC:</comment>
# <i>ln -sf /usr/portage/profiles/selinux/2005.1/ppc /etc/make.profile</i>
<comment>SPARC:</comment>
# <i>ln -sf /usr/portage/profiles/selinux/2005.1/sparc64 /etc/make.profile</i>
<comment>AMD64:</comment>
# <i>ln -sf /usr/portage/profiles/selinux/2005.1/amd64 /etc/make.profile</i>
</pre>

<impo>Profil SELinux'a posiada mniej flag USE w porównaniu do domyślnego
profilu. Polecenie <c>emerge info</c> wskaże czy są jakieś flagi które należy
włączyć w make.conf.</impo>

<note>Nie jest konieczne dodawanie flagi selinux do flag USE w make.conf. Profil
SELinux już tego dokonał.</note>

<note>
  Jeżeli pojawi się komunikat "!!! SELinux module not found. Please verify that
  it was installed.", nie należy się przejmować. Jest to normalne i zostanie
  naprawione później w trakcie procesu konwersji.
</note>
</body>
</subsection>
</section>

<section><title>Uaktualnianie nagłówków jądra</title>
<subsection><body>
<p>
  Należy rozpocząć od uaktualniania najważniejszych pakietów. Najpierw należy
  sprawdzić wersję zainstalowanych nagłówków jądra (linux-headers).
</p>

<pre caption="Sprawdzenie wersji linux-headers">
# <i>emerge -s linux-headers</i>
<comment>lub jeśli jest zainstalowany gentoolkit:</comment>
# <i>qpkg -I -v linux-headers</i>
</pre>

<p>
  Jeśli nagłówki jądra są starsze niż 2.4.20, nowsze muszą zostać zainstalowane.
</p>

<pre caption="Instalacja nowych nagłówków">
# <i>emerge \>=sys-kernel/linux-headers-2.4.20</i>
</pre>
</body>
</subsection>
</section>

<section><title>Uaktualnianie Glibc</title>
<subsection><body>
<p>
  Jeśli zostały zainstalowane nowe nagłówki, lub nie ma pewności czy glibc były
  skompilowane z nowymi nagłówkami, należy przekompilować glibc.
</p>

<pre caption="Rekompilowanie glibc">
# <i>emerge glibc</i>
</pre>

<impo>
  Jest to bardzo ważna czynność. Glibc muszą zostać skompilowane z nowszymi
  nagłówkami jądra, w innym przypadku niektóre operacje będą źle wykonane.
</impo>
</body></subsection>
</section>
</sections>
