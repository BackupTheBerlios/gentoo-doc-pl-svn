<?xml version='1.0' encoding="utf-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
  
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/hardened/selinux/hb-selinux-conv-reboot2.xml,v 1.2 2005/08/06 20:56:20 pebenito Exp $ -->

<sections>
<section><title>Instalowanie paczek SELinux</title>
<subsection>
<body>
<p>Należy zainstalować biblioteki, użytki oraz podstawową politykę. Wersja
polityki może wymagać dopracowania. W Przeglądzie SELinux można znaleźć więcej
informacji na temat wersji polityk. Potem należy załadować politykę.</p>

<pre caption="Instalowanie podstawowych pakietów SELinux oraz polityki">
# <i>emerge libselinux checkpolicy policycoreutils</i>
# <i>emerge selinux-base-policy</i>

# <i>cd /etc/security/selinux/src/policy</i>
<comment>Teraz należy załadować daną wersję polityki, jeśli zachodzi taka
potrzeba</comment>
# <i>make load</i>
</pre>
</body></subsection>
</section>

<section><title>Instalacja paczek przystosowanych do SELinux'a</title>
<subsection><body>
<p>Istnieje wiele paczek systemowych, które posiadają łatki dla SELinux. To
oprogramowanie posiada szereg dodatkowych funkcjonalności przystosowanych dla
SELinux, jak np. wyświetlanie kontektstów plików.</p>

<pre caption="Przeinstalowanie oprogramowania">
# <i>emerge sysvinit pam coreutils findutils openssh pam-login procps psmisc shadow util-linux python-selinux</i>
</pre>

<p>Jest inne oprogramowanie które posiada łatki dla SELinux, jednakże są
opcjonalne. Powinny one być przeinstalowane, jeśli są już zainstalowane, tak aby
łatki SELinux zostały nałożone:</p>
<ul>
<li>app-admin/logrotate</li>
<li>sys-apps/fcron</li>
<li>sys-apps/vixie-cron</li>
<li>sys-fs/udev</li>
<li>sys-libs/pwdb</li>
</ul>
<note>
  Fcron oraz Vixie-cron są jedynymi cronami ze wsparciem dla SELinux.
</note>
</body></subsection>
</section>

<section><title>Usuwanie niepotrzebnego oprogramowania</title>
<subsection><body>
<p>SELinux nie używa niektórych programów, które są używane w standardowej
instalacji Gentoo:</p> 	 
  	 
<pre caption="Usuwanie nieużywanych programów ze standardowej instalacji
Gentoo">
# <i>emerge -C textutils fileutils sh-utils</i>
</pre>
</body></subsection>
</section>

<section><title>Znakowanie systemu plików</title>
<subsection><body>

<p>Teraz należy oznakować systemy plików. Każdemu plikowi w systemi zostanie
nadany odpowiedni znacznik bezpieczeństwa. Utrzymanie zgodności znaczników jest
niezwykle ważne.</p>

<pre caption="Znakowanie systemu plików">
# <i>cd /etc/security/selinux/src/policy</i>
# <i>make relabel</i>
</pre>
<warn>Jest znany błąd ze starszymi wersjami GRUBa, który nie potrafił sobie
poradzić z odczytywaniem dowiązań symbolicznych, które zostały oznakowane.
Należy upewnyć się czy zainstalowany GRUB jest w wersji co najmniej 0.94. Należy
również uruchomić GRUBa i nadinstalować go do sektora rozruchowego aby upewnić
się że używa on uaktualnionych ustawień. 
Gdzieś tam leży LiveCD w razie czego, prawda?</warn>

<pre caption="Przeinstalowanie GRUB w sektorze rozruchowym (tylko dla
użytkowników GRUB'a)">
# <i>grub</i>

grub> root (hd0,0) <comment>(Partycja [uruchomieniowa] Your boot partition)</comment>
grub> setup (hd0) <comment>(Miejsce gdzie znajduje się rekord rozruchowy, tutaj
jest on w MBR)</comment>
</pre>
</body></subsection>
</section>

<section><title>Ostateczny ponowny rozruch</title>
<subsection><body>
<p>Należy komputer uruchomić ponownie. Potem należy się zalogować i ponownie
dokonać znakowania systemu plików, aby upewnić się że wszystkie pliki są dobrze
oznakowane (niektóre pliki mogły zostać utworzone podczas wyłączania i
uruchamiania komputera)</p>
<pre caption="Znakowanie plików">
# <i>cd /etc/security/selinux/src/policy</i>
# <i>make relabel</i>
</pre>
<note>
Jest mocno sugerowane aby <uri
link="http://www.gentoo.org/main/pl/lists.xml">subskrybować</uri> się na liście
dyskusyjnej gentoo-hardened. Na ogół niewiele się tam dzieje, jednakże
ogłoszenia dotyczące SELinux są dokonywane właśnie tam.
</note>
<p>
  SELinux jest zainstalowany!
</p>
</body></subsection>
</section>
</sections>
