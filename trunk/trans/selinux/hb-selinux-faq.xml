<?xml version='1.0' encoding="utf-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/hardened/selinux/hb-selinux-faq.xml,v 1.1 2004/07/06 03:22:02 pebenito Exp $ -->

<sections>
<section><title>Brakuje modułu SELinux podczas instalacji</title>
<subsection><title>"Dostaję ten błąd podczas instalacji:"</title>
<body>
<pre>
!!! SELinux module not found. Please verify that it was installed.
</pre>
<p>
  Oznacza to że brakuje modułu SELinux w portage lub jest on uszkodzony. Również
  python mógł być uaktualniony do nowej wersji, co oznacza iż nalezy
  przekompilować python-selinux. Przeinstalowanie dev-python/python-selinux
  powinno pomóc. Również poszczególne paczki mogły być zainstalowane bez
  odpowiednich oznakowań, więc przydałoby się dokonać takiego oznakowania.
</p>
</body></subsection>
</section>

<section><title>Błąd podczas rejestrowania możliwości [capabilities] z
jądrem</title>
<subsection><title>"Mam ten błąd jądra podczas uruchamiania:"</title>
<body>
<pre>
There is already a security framework initialized, register_security failed.
Failure registering capabilities with the kernel
selinux_register_security:  Registering secondary module capability
Capability LSM initialized
</pre>
<p>
  Oznacza to że moduł Capability LSM nie może się zarejestrować jako pierwszy
  moduł, gdyż tym modułem jest już SELinux. Trzeci komunikat oznacza że
  rejestruje jako drugi moduł SELinuxa. Jest to normalne zachowanie.
</p>
</body></subsection>
</section>

<section><title>Zły kontekst plików podczas oznakowywania plików</title>
<subsection><title>"Podczas oznakowywania plików, dostaję błąd o nieprawidłowych
kontekstach."</title><body>
<pre caption="Invalid contexts example">
# make relabel
/usr/sbin/setfiles file_contexts/file_contexts `mount | awk '/(ext[23]| xfs).*rw/{print $3}'`
/usr/sbin/setfiles:  read 559 specifications
/usr/sbin/setfiles:  invalid context system_u:object_r:default_t on line number 39
/usr/sbin/setfiles:  invalid context system_u:object_r:urandom_device_t on line number 120
/usr/sbin/setfiles:  invalid context system_u:object_r:fonts_t on line number 377
/usr/sbin/setfiles:  invalid context system_u:object_r:fonts_t on line number 378
/usr/sbin/setfiles:  invalid context system_u:object_r:krb5_conf_t on line number 445
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 478
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 479
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 492
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 493
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 494
Exiting after 10 errors.
make: *** [relabel] Error 1
</pre>
<p>
  Na początku należy się upewnić że /selinux jest zamontowana. Jeśli selinuxfs
  nie jest zamontowane, setfiles nie potrafi sprawdzić jakichkolwiek kontekstów,
  co powoduje iż uznaje że wszystkie konteksty są nieprawidłowe. Jeśli /selinux
  jest zamontowane, to najprawdopodobniej istnieje nowa polityka, która jeszcze
  nie została zamontowane, co oznacza że dane konteksty jeszcze nie są
  prawidłowe.
</p>
</body></subsection>
</section>


<!-- always keep this one as the bottom FAQ :) -->
<section><title>Przykładowa maszyna Gentoo SELinux</title>
<subsection><body>
<p>
  Ta maszyna nie jest uruchomiona w trybie użytkownika, ani chroot'a - posiada
  obowązkową kontrolę dostępu SELinuxa. Nie, nie można zainstalować na niej
  psybnc lub irc-bota, chyba że uda się zniszczyć zabezpieczenia SELinuxa i
  otrzymać wyższe prawa dostępu.
</p>
</body></subsection>
</section>
<!-- dont put anything below here, this demo machine faq should be the last one -->
</sections>
