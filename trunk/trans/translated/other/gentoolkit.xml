<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Id$ -->

<!-- Orig revision: 1.18 -->
<!-- Translator: szczech <marek.wiecek@gmail.com> -->
<!-- Title: Gentoolkit -->
<!-- Status: Ukończono -->

<guide link="/doc/pl/gentoolkit.xml" lang="pl">
<title>Gentoolkit</title>

<author title="Autor">
  <mail link="mbutcher@aleph-null.tv">Matt Butcher</mail>
</author>
<author title="Edytor">
  <!-- zhen@gentoo.org -->John P. Davis
</author>
<author title="Edytor">
  <mail link="erwin@gentoo.org">Erwin</mail>
</author>
<author title="Edytor">
  <mail link="fox2mike@gmail.com">Shyam Mani</mail>
</author>
<author title="Edytor">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Tłumacz">
  <mail link="marek.wiecek@gmail.com">Marek Wiecek</mail>
</author>

<!-- Licensed under GFDL -->

<abstract>
Gentoolkit to zestaw narzędzi, które ułatwiają administrację systemu Gentoo.
Niniejszy dokument opisuje podstawy kilku z nadzędzi dostępnych w pakiecie
Gentoolkit.
</abstract>

<version>1.5</version>
<date>2004-12-27</date>

<chapter>
<title>Wprowadzenie</title>
<section>
<title>Co to jest Gentoolkit?</title>
<body>

<p>
Gentoo jest unikalną dystrybucją i prezentuje ona pewien stopień złożoności
niewystępujący w innych dystrybucjach. Deweloperzy oraz inni, mający wkład w
rozwój Gentoo, zaczeli odkrywać ten stopień złożoności. Postanowili więc
napisać, pomocne dla użytkowników i administratorów, narzędzia, które pozwolą
na obejście tych niewygód. Wiele z tych narzędzi weszło w skład pakietu
<c>app-portage/gentoolkit</c> dzięki ludziom spoza projektu Gentoo.
</p>

<note>
W chwili obecnej występują dwie wersje pakietu gentoolkit:
<c>app-portage/gentoolkit</c> oraz <c>app-portage/gentoolkit-dev</c>. Pierwszy
z nich zawiera skrypty administracyjne, drugi zawiera szczególne skrypty
wspomagające rozwój/programowanie na Gentoo. Niniejszy dokument skupi się
jedynie na pakiecie gentoolkit.
</note>

<p>
Gentoolkit zawiera całą masę użytecznych narzędzi pomocnych w zarządzaniu
pakietami. Pozwalają one również być na bieżąco z tym co się dzieje w
systemie. Większość użytkowników - zwłaszcza tych, którzy często aktualizują
system - skorzysta z instalacji pakietu gentoolkit.
</p>

</body>
</section>
<section>
<title>Instalacja</title>
<body>

<p>
Instalacja sprowadza się do użycia narzędzia emerge, dokładnie tak, jak
z pozostałymi pakietami w Gentoo.
</p>

<pre caption="Instalacja pakietu gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

<note>
Wiele narzędzi pakietu gentoolkit ujawnia istotne informacje o systemie.
Mogą one wymagać uprawnień użytkownika root. Wykonywane przez użytkownika z niższymi uprawnieniach mogą działać niepoprawnie.
</note>

</body>
</section>
<section>
<title>Dokumentacja</title>
<body>

<p>
Dokumentacja (poza stronami podręcznika man) przechowywana jest w katalogu
<path>/usr/doc/gentoolkit-[wersja]/[nazwa-programu]/</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>equery</title>
<section>
<title>Wprowadzenie</title>
<body>

<p>
Narzędzie <c>equery</c> zawiera w sobie funkcje programu <c>epm</c> (jak i
przestarzałego <c>qpkg</c>). Posiada również inne własności, dzięki którym
jest użyteczne. <c>equery --help</c> wyświetla jego pełny zestaw opcji.
<c>equery</c> może w przyszłości zastąpić program <c>etcat</c>.
</p>

<note>
Niektóre opcje wyświetlane przez <c>equery --help</c> nie zostały jeszcze
zaimplementowane.
</note>

</body>
</section>
<section>
<title>Dowiadywanie się ile miejsca zajmuje pakiet</title>
<body>

<p>
Czy ciekawiło cię może kiedyś ile miejsca na dysku zajmuje dany pakiet?
Skoro pliki pakietu mogą znajdować się w różnych katalogach, zwykłe <c>du
-hc</c> może zwrócić niewłaściwą wartość. Nie martw się jednak, z pomocą
przychodzi <c>equery</c>!
</p>

<pre caption="Rozmiar Pakietu">
# <i>equery size openoffice-bin</i>
* app-office/openoffice-bin-1.1.2
	   Total Files : 2908
	   Total Size  : 223353.31 KiB
</pre>

<p>
Jak widzisz <c>equery</c> zwraca zarówno całkowity rozmiar pakietu jak i ilość 
plików wchodzących w jego skład.
</p>

</body>
</section>
<section>
<title>Lista flag USE używanych przez pakiety.</title>
<body>

<p>
Narzędzie <c>equery</c> pozwala na wyświetlenie informacji o flagach USE 
wykorzystywanych przez określony pakiet. Pokazuje nam jakie flagi obecnie są
włączone, a jakie są dostępne.
</p>

<pre caption="Włączanie i wyłączanie flag USE">
# <i>equery uses ethereal</i>
[ Colour Code : set unset ]
[ Legend    : (U) Col 1 - Current USE flags        ]
[           : (I) Col 2 - Installed With USE flags ]

 U I [ Found these USE variables in : net-analyzer/ethereal-0.10.6 ]
 - - adns  : Adds support for the adns DNS client library
 + + gtk   : Adds support for x11-libs/gtk+ (The GIMP Toolkit)
 - - ipv6  : Adds support for IP version 6
 - - snmp  : Adds support for the Simple Network Management Protocol if available
 + + ssl   : Adds support for Secure Socket Layer connections
 + + gtk2  : Use gtk+-2.0.0 over gtk+-1.2 in cases where a program supports both.
 - - debug : Tells configure and the makefiles to build for debugging. Effects vary across packages,
             but generally it will at least add -g to CFLAGS. Remember to set FEATURES=nostrip too
</pre>

<p>
Pakiet ethereal został zainstalowany z ustawionymi flagami: gtk, ssl oraz gtk2.
Inne flagi dostępne dla tego pakietu to: adns, ipv6, snmp i debug. Jeśli
chcesz się dowiedzieć więcej, poczytaj rozdział o <uri
link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=2">flagach USE</uri> w
<uri link="/doc/en/handbook/">Podręczniku Gentoo</uri>.
</p>

</body>
</section>
<section>
<title>Gdzie się znajduje ebuild?</title>
<body>

<p>
Dzięki <c>equery</c> możemy się dowiedzieć, który ebuild odpowiada za dany
pakiet. Można to osiągnąć poprzez polecenie <c>equery which</c> pokazujące
pełną ścieżkę do ebuilda.
</p>

<pre caption="Wyświetlanie scieżki do ebuilda">
# <i>equery which cdrtools</i>
/usr/portage/app-cdr/cdrtools/cdrtools-2.01_alpha37.ebuild
</pre>

</body>
</section>
<section>
<title>Wykresy zależności</title>
<body>

<p>
Narzędzie <c>equery</c> potrafi narysować wykres zależności dla konkretnego
pakietu. Wykres zawiera listę wszystkich pakietów, od których zależy
pośrednio lub bezpośrednio dany pakiet.
</p>

<pre caption="Wykres zależności dla cdrtools">
# <i>equery depgraph cdrtools</i>
Displaying dependencies for app-cdr/cdrtools-2.01_alpha37
`-- app-cdr/cdrtools-2.01_alpha37
 `-- sys-libs/glibc-2.3.4.20040808 (virtual/libc)
  `-- sys-kernel/linux-headers-2.4.22 (virtual/os-headers)
   `-- sys-apps/baselayout-1.10.4
    `-- sys-apps/sysvinit-2.85-r1
     `-- sys-apps/gawk-3.1.3-r1
      `-- sys-apps/util-linux-2.12-r4
          `-- sys-apps/sed-4.0.9
	      `-- sys-libs/ncurses-5.4-r4
	          `-- sys-apps/pam-login-3.14
	          `-- sys-libs/pam-0.77-r1
                 `-- sys-libs/cracklib-2.7-r10
               `-- sys-apps/miscfiles-1.3-r1
              `-- app-arch/gzip-1.3.5-r1
              `-- sys-apps/portage-2.0.50-r10
</pre>

<p>
Na przykład glibc stanowi bezpośrednią zależność dla cdrtools, a linux-headers
pośrednią.
</p>

</body>
</section>
</chapter>

<chapter>
<title>euse</title>
<section>
<title>Wprowadzenie</title>
<body>

<p>
Narzędzie <c>euse</c> służy do przeglądania, włączania i wyłaczania flag USE
w różnych miejscach. Jeśli chcesz się dowiedzieć więcej, poczytaj o <uri
link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=2">flagach USE</uri>.
Polecenie <c>euse -i</c> wyświetla listę wszystkich flag.
</p>

</body>
</section>
<section>
<title>Czytanie, włączanie i wyłączanie flag USE</title>
<body>

<p>
Polecenie <c>euse --conf</c> wyświetla aktualnie włączone/wyłączone flagi USE
w pliku make.conf.
</p>

<pre caption="Przeglądanie flag z pliku make.conf">
# <i> euse --conf</i>
USE setting in make.conf:
alsa acpi apache2 cups cdr crypt cscope -doc ethereal fbcon gif gimpprint gnome
gpm gstreamer gtk2 gtkhtml imlib imlib2 innodb -java javascript jpeg libg++ libwww
mad md5sum mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses oggvorbis odbc
offensive opengl pam pdflib perl png python quicktime readline sdl spell sse ssl
svga tcltk tiff truetype usb vanilla X xml2 xmms xosd xv xvid x86 zlib
</pre>

<p>
Włączanie danej flagi USE odbywa się za pomocą polecenia <c>euse --enable</c>.
Wymaganym parametrem tego polecenia jest nazwa flagi. Jeśli flaga jeszcze nie
była włączona, <c>euse</c> dodaje ją na końcu aktualnej listy flag USE.
Jeżeli nazwa flagi będzie nieprawidłowa, zostanie wyświetlone ostrzeżenie.
Wyłączanie flagi USE odbywa się za pomocą polecenia <c>euse --disable</c>.
Jeśli parametr będzie błędny, użytkownik zostanie o tym powiadomiony. W
przypadku, gdy flaga była już włączona, jest wyłączana za pomocą -flaga w pliku
make.conf.
</p>

<pre caption="Włączanie flagi USE, 3dfx">
# <i>euse --enable 3dfx</i>
USE setting in make.conf after enabling:
alsa acpi apache2 cups cdr crypt cscope -doc ethereal fbcon gif gimpprint gnome
gpm gstreamer gtk2 gtkhtml imlib imlib2 innodb -java javascript jpeg libg++ libwww
mad md5sum mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses oggvorbis odbc
offensive opengl pam pdflib perl png python quicktime readline sdl spell sse ssl
svga tcltk tiff truetype usb vanilla X xml2 xmms xosd xv xvid x86 zlib 3dfx
</pre>

<pre caption="Wyłączanie flagi USE, 3dfx">
# <i>euse --disable 3dfx</i>
USE setting in make.conf after disabling:
alsa acpi apache2 cups cdr crypt cscope -doc ethereal fbcon gif gimpprint gnome
gpm gstreamer gtk2 gtkhtml imlib imlib2 innodb -java javascript jpeg libg++ libwww
mad md5sum mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses oggvorbis odbc
offensive opengl pam pdflib perl png python quicktime readline sdl spell sse ssl
svga tcltk tiff truetype usb vanilla X xml2 xmms xosd xv xvid x86 zlib -3dfx
</pre>

<note>
Narzędzie <c>euse</c> nie kasuje wpisu w pliku make.conf. W celu wyłączenia
flagi narzędzie po prostu dodaje - (minus) przed samą flagą. Aby uniknąć
niechcianych zmiennych, być może bedzie koniczne ręczne czyszczenie pliku
make.conf. 
</note>

</body>
</section>
</chapter>

<chapter>
<title>Pozostałe narzędzia</title>
<section>
<title>revdep-rebuild</title>
<body>

<p>
Narzędzie to służy do przebudowywania zależności odwrotnych. Jego zadaniem jest
przeskanowanie ebuildów, które zostały zepsute w wyniku uaktualnienia pakietów,
od których zależą. Narzędzie to potrafi przeinstalować znalezione pakiety,
jednakże może się zdarzyć, że dany pakiet nie będzie już działał z obecnie
zainstalowanymi zależnościami. W takiej sytuacji powinno się uaktualnić zepsuty
pakiet do nowszej wersji. revdep-rebuild przekazuje parametry do polecenia
emerge, dzięki czemu można użyć <c>--pretend</c>, co pozwoli na wcześniejsze 
sprawdzenie co zostanie zainstalowane.
</p>

<pre caption="Uruchamianie revdep-rebuild w trybie --pretend">
# <i>revdep-rebuild -p</i>

Checking reverse dependencies...
Packages containing binaries and libraries broken by any package update,
will be recompiled.

Collecting system binaries and libraries... done.
  (/root/.revdep-rebuild.1_files)

Collecting complete LD_LIBRARY_PATH... done.
  (/root/.revdep-rebuild.2_ldpath)

Checking dynamic linking consistency...
  broken /usr/lib/ao/plugins-2/libarts.so (requires libartsc.so.0)
  broken /usr/lib/kde3/libkpresenterpart.so (requires libartskde.so.1 libqtmcop.so.1
         libsoundserver_idl.so.1 libkmedia2_idl.so.1 libartsflow.so.1 libartsflow_idl.so.1 libmcop.so.1)
  broken /usr/lib/ruby/site_ruby/1.8/i686-linux/fox.so (requires libFOX-1.0.so.0)
  broken /usr/lib/xine/plugins/1.0.0/xineplug_ao_out_arts.so (requires libartsc.so.0)
  broken /usr/lib/perl5/vendor_perl/5.8.0/i686-linux/auto/SDL_perl/SDL_perl.so (requires libSDL_gfx.so.0)
  broken /usr/lib/libloudmouth-1.so.0.0.0 (requires libgnutls.so.10)
  broken /usr/bin/k3b (requires libartskde.so.1 libqtmcop.so.1 libsoundserver_idl.so.1 libkmedia2_idl.so.1
         libartsflow.so.1 libartsflow_idl.so.1 libmcop.so.1)
  broken /usr/bin/lua (requires libhistory.so.4)
  broken /usr/bin/lyx (requires libAiksaurus-1.0.so.0)
  broken /usr/bin/luac (requires libhistory.so.4)
  broken /usr/bin/avidemux2 (requires libartsc.so.0)
  broken /usr/bin/pptout (requires libxml++-0.1.so.11)
  broken /usr/bin/xml2ps (requires libxml++-0.1.so.11)
 done.
  (/root/.revdep-rebuild.3_rebuild)

Assigning files to ebuilds... done.
  (/root/.revdep-rebuild.4_ebuilds)

Evaluating package order... done.
  (/root/.revdep-rebuild.5_order)

All prepared. Starting rebuild...
emerge --oneshot --nodeps -p =app-cdr/k3b-0.11.14 =app-office/koffice-1.3.2 =app-office/lyx-1.3.4 \
       =app-office/passepartout-0.2 =dev-lang/lua-5.0.2 =dev-ruby/fxruby-1.0.29 =media-libs/libao-0.8.5 \
       =media-libs/xine-lib-1_rc5-r3 =media-video/avidemux-2.0.26 =net-libs/loudmouth-0.16 

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] app-cdr/k3b-0.11.14  
[ebuild   R   ] app-office/koffice-1.3.2  
[ebuild   R   ] app-office/lyx-1.3.4  
[ebuild   R   ] app-office/passepartout-0.2  
[ebuild   R   ] dev-lang/lua-5.0.2  
[ebuild   R   ] dev-ruby/fxruby-1.0.29  
[ebuild   R   ] media-libs/libao-0.8.5  
[ebuild   R   ] media-libs/xine-lib-1_rc5-r3  
[ebuild   R   ] media-video/avidemux-2.0.26  
[ebuild   R   ] net-libs/loudmouth-0.16  

Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>

<p>
Jeśli istnieje potrzeba przebudowania jakichkolwiek pakietów, można uruchomić
<c>revdep-rebuild</c> bez parametru <c>-p</c>, co spowoduje ponowne zainstalowanie
wyświetlonych pakietów.
</p>

</body>
</section>

<section>
<title>glsa-check</title>
<body>

<p>
Narzędzie <c>glsa-check</c> służy głównie do śledzenia zaleceń związanych z
bezpieczeństwem (Gentoo Linux Security Advisory). Ta funkcjonalność może zostać
w przyszłości wbudowana w <c>emerge</c> i <c>equery</c>. Jeśli chcesz się
dowiedzieć czegoś więcej na ten temat, odwiedź stronę <uri
link="/proj/en/portage/glsa-integration.xml">Integracja GLSA z Portage</uri>.
</p>

</body>
</section>
</chapter>

</guide>
