<?xml version='1.0' encoding="UTF-8"?>

<!-- Translator: lucass <lucass@gentoo.pl> -->
<!-- Orig revision: 1.7 -->
<!-- Title: Sztuczki i Kruczki Projektu Dokumentacji -->
<!-- Status: Ukończono -->

<!-- $Id$ -->


<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/proj/en/gdp/tipsntricks.xml">
<title>Sztuczki i Kruczki Projektu Dokumentacji</title>
<author title="Autor">
    <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Tłumacz">
    <mail link="lucass@gentoo.pl">Łukasz Strzygowski</mail>
</author>


<abstract>
Niektóre sztuczki i kruczki mogą uprościć życie developera Gentoo (lub je utrudnić :)
</abstract>

<license/>

<version>0.6</version>
<date>24 lutego 2004</date>

<chapter>
<title>Konfiguracja środowiska pracy</title>
<section>
<title>Środowisko pracy uczestników projektu</title>
<body>

<p>
Zacznijmy od stworzenia katalogu, przeznaczonego do pracy nad dokumentami.
W przykładzie użyjemy <path>~/work/gentoo/doc</path>. Wewnątrz niego,
stwórz podkatalog, w którym przechowywał będziesz (aktualną)
kopię angielskiej dokumentacji (na przykład <path>en/</path>).
</p>

<p>
Następnie pobierz tarball z najaktualniejszą migawką angielskojęzycznej
dokumentacji:
</p>

<pre caption="Pobieranie angielskiej dokumentacji">
# <i>wget http://www.gentoo.org/dyn/doc-snapshots/docs-latest-en.tar.bz2</i>
</pre>

<p>
Rozpakuj go do katalogu <path>en/</path>. Teraz posiadasz możliwie
aktualną kopię oryginalnej dokumentacji. Za każdym razem, kiedy zechcesz
ją uaktualnić, możesz pobrać tarballa ponownie lub ściągnąć źródła
pojedynczych dokumentów, dodając do ich adresu <path>?passthru=1</path>.
Na przykład:
</p>

<pre caption="Aktualizacja dokumentu">
# <i>wget http://www.gentoo.org/doc/en/alsa-guide.xml?passthru=1 -O alsa-guide.xml</i>
</pre>

<p>
Jeśli chcesz pomóc w tłumaczeniach dokumentów, stwórz osobny katalog, w którym
będziesz przechowywał przekłady.
</p>

<pre caption="Pobieranie migawki dokumentów w danym języku">
# <i>mkdir </i><comment>${LANG}</comment>
# <i>cd </i><comment>${LANG}</comment>
# <i>wget
# http://www.gentoo.org/dyn/doc-snapshots/docs-latest-</i><comment>${LANG}</comment><i>.tar.bz2</i>
# <i>tar xvjf docs-latest-*.tar.bz2</i>
</pre>

<p>
Kiedy będziesz chciał zaktualizować dokument, skopiuj go najpierw z <path>${LANG}</path>
do głównego katalogu (<path>~work/gentoo/doc</path>) i pracuj nad kopią.
Musisz zachować oryginał aby utworzyć patcha:
</p>

<pre caption="Tworzenie patcha z aktualizacją">
# <i>diff -uNt </i><comment>${LANG}</comment><i>/alsa-guide.xml alsa-guide.xml</i> > alsa-guide.diff
</pre>

</body>
</section>
<section>
<title>Repozytorium CVS Online</title>
<body>

<p>
Możesz wyświetlić różnice pomiędzy poszczególnymi wersjami dokumentów w naszym
<uri link="/cgi-bin/viewcvs.cgi">repozytorium CVS</uri>. Katalog z angielską
doumentacją jest
<uri link="/cgi-bin/viewcvs.cgi/xml/htdocs/doc/en/?cvsroot=gentoo&amp;sortby=date">w pełni dostępny</uri>.
Repozytorium CVS na WWW aktualizowane jest co godzinę.
</p>

</body>
</section>
<section>
<title>Lokalne repozytorium dla developerów</title>
<body>

<p>
Stwórz przeznaczony na dokumentację katalog, na przykład
<path>~/work/gentoo/doc</path>. Następnie załóż podkatalog <path>cvs/</path>,
gdzie będziesz przechowywał lokalną kopię CVS:
</p>

<pre caption="Pobieranie migawki CVS">
# <i>mkdir cvs; cd cvs/</i>
# <i>export CVSROOT=</i><comment>&lt;twój nick&gt;</comment><i>@cvs.gentoo.org:/home/cvsroot</i>
# <i>cvs co doc</i>
</pre>

<p>
Aby ją zaktualizować, wykonaj w katalogu <path>cvs/doc</path>
polecenie <c>cvs update -dP</c>.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Testowanie GuideXML</title>
<section>
<title>Środowisko Testowe</title>
<body>

<p>
Zacznijmy od stworzenia katalogu <path>test/</path>, w którym 
będziesz trzymał pliki <path>guide.dtd</path>, <path>main.css</path>
i kilka obrazków:
</p>

<pre caption="Tworzenie środowiska do testów">
# <i>mkdir test</i>
# <i>cd test</i>
# <i>mkdir dtd css images</i>
# <i>wget -P dtd/ http://www.gentoo.org/dtd/guide.dtd</i>
# <i>wget -P dtd/ http://www.gentoo.org/dtd/book.dtd</i>
# <i>wget -P css/ http://www.gentoo.org/css/main.css</i>
# <i>wget -P images/ http://www.gentoo.org/images/gbot-s.gif \
  http://www.gentoo.org/images/gridtest.gif \
  http://www.gentoo.org/images/gtop-s.jpg \
  http://www.gentoo.org/images/line.gif \
  http://www.gentoo.org/images/netraverse-gentoo.gif</i>
</pre>

<p>
Następnie pobierz specjalną wersję <path>guide.xsl</path> dostępną
na 
<uri link="http://dev.gentoo.org/~swift/local/guide.xsl">stronie SwifTa</uri>. 
Przeznaczona jest ona do konwersji GuideXML do HTML na lokalnych maszynach.
</p>

<pre caption="Pobieranie guide.xsl">
# <i>wget http://dev.gentoo.org/~swift/local/guide.xsl</i>
</pre>

<p>
Do pliku <path>/etc/xml/catalog</path> dodaj następującą linię:
</p>

<pre caption="/etc/xml/catalog">
&lt;rewriteURI uriStartString="/dtd" rewritePrefix="<i>/path/to/dtddir</i>"/&gt;
</pre>

<p>
Oczywiście zastępując <c>/path/to/dtddir</c> prawidłową lokacją
pobranych <path>guide.dtd</path> oraz <path>book.dtd</path>.
</p>

</body>
</section>
<section>
<title>Testowanie i Konwersja Przewodnika Gentoo</title>
<body>

<p>
Aby przetestować Przewodnik Gentoo, sprawdź najpierw czy zawiera poprawną
składnię XML:
</p>

<pre caption="Weryfikacja składni XML za pomocą xmllint">
# <i>xmllint --valid --noout alsa-guide.xml</i>
</pre>

<p>
Jeśli <c>xmllint</c> nie wyświetli żadnych komunikatów, to nie ma w nim żadnych błędów
składni XML. Następnie musisz skonwertować go do HTML za pomocą <c>xsltproc</c>:
</p>

<pre caption="Konwersja do HTML">
# <i>xsltproc --novalid test/guide.xsl alsa-guide.xml &gt; test/alsa-guide.html</i>
</pre>

<p>
Jeśli nie otrzymasz żadnych błędów, to wszystko przebiegło pomyślnie.
Wyświetl w przeglądarce WWW 
<uri>file:///home/user/work/gentoo/doc/test/alsa-guide.html</uri> aby obejrzeć
rezultat. W przeciwnym wypadku popraw dokument i powtórz wyżej opisane czynności.
</p>

</body>
</section>
<section>
<title>Testowanie i Konwersja Podręcznika Gentoo</title>
<body>

<p>
Podręcznik Gentoo składa się z rozdziałów. Do konwersji każdego z nich,
będziesz potrzebował zarówno pliku <path>handbook.xml</path>, jak i
odpowiedniego <path>hb-</path> (na przykład <path>hb-install-about.xml</path>).
Następnie musisz podać <c>xsltproc</c> takie same parametry, jakie używane
są przy przeglądaniu dokumentu online, czyli <c>part</c> oraz <c>chap</c>.
Na przykład, aby skonwertować <path>hb-install-about</path> powinieneś
wydać następujące polecenia:
</p>

<pre caption="Konwersja hb-install-about.xml">
# <i>xmllint --valid --noout handbook.xml</i>
# <i>xmllint --valid --noout hb-install-about.xml</i>
# <i>xsltproc --stringparam part 1 --stringparam chap 1 test/guide.xsl handbook.xml &gt; test/hb-install-about.html</i>
</pre>

</body>
</section>
</chapter>
</guide>
