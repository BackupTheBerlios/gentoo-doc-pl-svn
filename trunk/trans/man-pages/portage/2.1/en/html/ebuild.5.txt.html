Content-type: text/html

<HTML><HEAD><TITLE>Manpage of EBUILD</TITLE>
</HEAD><BODY>
<H1>EBUILD</H1>
Section: portage (5)<BR>Updated: Mar 2006<BR><A HREF="#index">Index</A>
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ebuild - the internal format, variables, and functions in an ebuild script
<A NAME="lbAC">&nbsp;</A>
<H2>DESCRIPTION</H2>

The
<B><A HREF="http://localhost/cgi-bin/man/man2html?1+ebuild">ebuild</A></B>(1)

program accepts a single ebuild script as an argument.  This script
contains variables and commands that specify how to download, unpack,
patch, compile, install and merge a particular software package from
its original sources.  In addition to all of this, the ebuild script
can also contain pre/post install/remove commands, as required.  All 
ebuild scripts are written in bash.
<A NAME="lbAD">&nbsp;</A>
<H2>EXAMPLES</H2>

Here's a simple example ebuild:
<P>

<PRE>
# Copyright 1999-2006 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: $

inherit some_eclass another_eclass

DESCRIPTION=&quot;Super-useful stream editor (sed)&quot;
HOMEPAGE=&quot;<A HREF="http://www.gnu.org/software/sed/sed.html">http://www.gnu.org/software/sed/sed.html</A>&quot;
SRC_URI=&quot;<A HREF="ftp://alpha.gnu.org/pub/gnu/sed/${P}.tar.gz">ftp://alpha.gnu.org/pub/gnu/sed/${P}.tar.gz</A>&quot;

LICENSE=&quot;GPL-2&quot;
SLOT=&quot;0&quot;
KEYWORDS=&quot;~x86&quot;
IUSE=&quot;&quot;

DEPEND=&quot;virtual/libc&quot;
RDEPEND=&quot;virtual/libc&quot;

src_compile() {
        econf || die &quot;could not configure&quot;
        emake || die &quot;emake failed&quot;
}

src_install() {
        into /usr
        doinfo doc/sed.info
        doman doc/sed.1
        into /
        dobin sed/sed || die &quot;dobin sed failed&quot;
        dodir /usr/bin
        dosym /bin/sed /usr/bin/sed
        dodoc NEWS README* THANKS TODO AUTHORS BUGS ANNOUNCE
}
</PRE>

<A NAME="lbAE">&nbsp;</A>
<H2>VARIABLES</H2>

<DL COMPACT>
<DT><B>MISC USAGE NOTES</B>

<DD>
- All variables defined in <B><A HREF="http://localhost/cgi-bin/man/man2html?5+make.conf">make.conf</A></B>(5) are available for use in 
ebuilds (such as the PORTAGE* and PORTDIR* variables)
<BR>

- When assigning values to variables in ebuilds, you <B>cannot have a 
space</B> between the variable name and the equal sign.
<DT><B>P</B>

<DD>
This variable contains the package name without the ebuild revision.
This variable must NEVER be modified.
<BR>

<B>xfree-4.2.1-r2.ebuild</B> --&gt; <B>$P</B>=='<I>xfree-4.2.1</I>'
<DT><B>PN</B>

<DD>
Contains the name of the script without the version number.
<BR>

<B>xfree-4.2.1-r2.ebuild</B> --&gt; <B>$PN</B>=='<I>xfree</I>'
<DT><B>PV</B>

<DD>
Contains the version number without the revision.
<BR>

<B>xfree-4.2.1-r2.ebuild</B> --&gt; <B>$PV</B>=='<I>4.2.1</I>'
<DT><B>PR</B>

<DD>
Contains the revision number or 'r0' if no revision number exists.
<BR>

<B>xfree-4.2.1-r2.ebuild</B> --&gt; <B>$PR</B>=='<I>r2</I>'
<DT><B>PVR</B>

<DD>
Contains the version number with the revision.
<BR>

<B>xfree-4.2.1-r2.ebuild</B> --&gt; <B>$PVR</B>=='<I>4.2.1-r2</I>'
<DT><B>PF</B>

<DD>
Contains the full package name <I>[PN]-[PVR]</I>
<BR>

<B>xfree-4.2.1-r2.ebuild</B> --&gt; <B>$PF</B>=='<I>xfree-4.2.1-r2</I>'
<DT><B>CATEGORY</B>

<DD>
Contains the package category name.
<DT><B>A</B>

<DD>
Contains all source files required for the package.  This variable must
not be defined. It is autogenerated from the <I>SRC_URI</I> variable.
<DT><B>WORKDIR</B> = <I>&quot;${PORTAGE_TMPDIR}/portage/${PF}/work&quot;</I><DD>
Contains the path to the package build root.  Do not modify this variable.
<DT><B>FILESDIR</B> = <I>&quot;${PORTDIR}/${CATEGORY}/${PN}/files&quot;</I><DD>
Contains the path to the 'files' sub folder in the package specific
location in the portage tree.  Do not modify this variable.
<DT><B>S</B> = <I>&quot;${WORKDIR}/${P}&quot;</I><DD>
Contains the path to the temporary <I>build directory</I>.  This variable
is used by the functions <I>src_compile</I> and <I>src_install</I>.  Both
are executed with <I>S</I> as the current directory.  This variable may
be modified to match the extraction directory of a tarball for the package.
<DT><B>T</B> = <I>&quot;${PORTAGE_TMPDIR}/portage/${PF}/temp&quot;</I><DD>
Contains the path to a <I>temporary directory</I>.  You may use this for
whatever you like.
<DT><B>D</B> = <I>&quot;${PORTAGE_TMPDIR}/portage/${PF}/image&quot;</I><DD>
Contains the path to the temporary <I>install directory</I>.  Every write 
operation that does not involve the helper tools and functions (found below) 
should be prefixed with ${D}.  Do not modify this variable.
<DT><B>DESCRIPTION</B> = <I>&quot;A happy little package&quot;</I><DD>
Should contain a short description of the package.
<DT><B>SRC_URI</B> = <I>&quot;<A HREF="http://happy.com/little/${P}.tar.gz">http://happy.com/little/${P}.tar.gz</A>&quot;</I><DD>
Contains a list of URI's for the required source files.  It can contain
multiple URI's for a single source file.  The list is processed in order 
if the file was not found on any of the <I>GENTOO_MIRRORS</I>.
<DT><B>HOMEPAGE</B> = <I>&quot;<A HREF="http://happy.com/">http://happy.com/</A>&quot;</I><DD>
Should contain a list of URL's for the sources main sites and other further
package dependent information.
<DT><B>KEYWORDS</B> = <I>[-~][x86,ppc,sparc,mips,alpha,arm,hppa]</I><DD>
Should contain appropriate list of arches that the ebuild is know to
work/not work.  By default if you do not know if an ebuild runs under
a particular arch simply omit that KEYWORD.  If the ebuild will not
work on that arch include it as -ppc for example.  If the ebuild is
being submitted for inclusion, it must have ~arch set for architectures
where it has been PROVEN TO WORK.  (Packages KEYWORDed this way may be
unmasked for testing by setting ACCEPT_KEYWORDS=&quot;~arch&quot; on the command
line, or in <B><A HREF="http://localhost/cgi-bin/man/man2html?5+make.conf">make.conf</A></B>(5)) For an authoritative list please review
/usr/portage/profiles/arch.list.  Please keep this list in alphabetical order.
<DT><B>SLOT</B><DD>
This sets the SLOT for packages that may need to have multiple versions 
co-exist.  By default you should set <B>SLOT</B>=&quot;0&quot;.  If you are unsure, then 
do not fiddle with this until you seek some guidance from some guru.  This 
value should <I>NEVER</I> be left undefined.
<DT><B>LICENSE</B><DD>
This should be a space delimited list of licenses that the package falls
under.  This <B>_must_</B> be set to a matching license in
/usr/portage/licenses/. If the license does not exist in portage yet, you
must add it first.
<DT><B>IUSE</B><DD>
This should be a list of any and all USE flags that are leveraged within
your build script.  The only USE flags that should not be listed here are
arch related flags (see <B>KEYWORDS</B>).
<DT><B>DEPEND</B><DD>
This should contain a list of all packages that are required for the
program to compile.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>DEPEND Atoms</B>

<DD>
A depend atom is simply a dependency that is used by portage when calculating
relationships between packages.  Please note that if the atom has not already
been emerged, then the latest version available is matched.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>Atom Bases</B>

<DD>
The base atom is just a full category/packagename.  Hence, these are base atoms:
<P>
<PRE>
<I>sys-apps/sed</I>
<I>sys-libs/zlib</I>
<I>net-misc/dhcp</I>
</PRE>

<DT><B>Atom Versions</B>

<DD>
It is nice to be more specific and say that only certain versions of atoms are
acceptable.  Note that versions must be combined with a prefix (see below).  Hence
you may add a version number as a postfix to the base:
<P>
<PRE>
sys-apps/sed<I>-4.0.5</I>
sys-libs/zlib<I>-1.1.4-r1</I>
net-misc/dhcp<I>-3.0_p2</I>
</PRE>

<P>
Versions are normally made up of two or three numbers separated by periods, such 
as 1.2 or 4.5.2.  This string may be followed by a character such as 1.2a or 4.5.2z.  
Note that this letter is <B>not</B> meant to indicate alpha, beta, etc... status.  
For that, use the optional suffix; either _alpha, _beta, _pre (pre-release), _rc 
(release candidate), or _p (patch).  This means for the 3rd pre-release of a package, 
you would use something like 1.2_pre3.
<DT><B>Atom Prefix Operators [&gt; &gt;= = &lt;= &lt;]</B>

<DD>
Sometimes you want to be able to depend on general versions rather than specifying
exact versions all the time.  Hence we provide standard boolean operators:
<P>
<PRE>
<I>&gt;</I>media-libs/libgd-1.6
<I>&gt;=</I>media-libs/libgd-1.6
<I>=</I>media-libs/libgd-1.6
<I>&lt;=</I>media-libs/libgd-1.6
<I>&lt;</I>media-libs/libgd-1.6
</PRE>

<DT><B>Extended Atom Prefixes [!~] and Postfixes [*]</B>

<DD>
Now to get even fancier, we provide the ability to define blocking packages and
version range matching.  Also note that these extended prefixes/postfixes may
be combined in any way with the atom classes defined above.  Here are some common
examples you may find in the portage tree:
<P>
<PRE>
<I>!</I>app-text/dos2unix
=dev-libs/glib-2<I>*</I>
<I>!</I>=net-fs/samba-2<I>*</I>
<I>~</I>net-libs/libnet-1.0.2a
</PRE>

<P>
<I>!</I> means block packages from being installed at the same time.
<BR>

<I>*</I> means match any version of the package so long as the specified base 
is matched.  So with a version of '2*', we can match '2.1', '2.2', '2.2.1', 
etc... and not match version '1.0', '3.0', '4.1', etc...
<BR>

<I>~</I> means match any revision of the base version specified.  So in the 
above example, we would match versions '1.0.2a', '1.0.2a-r1', '1.0.2a-r2', 
etc...
</DL>
</DL>

<DT><B>Dynamic DEPENDs</B>

<DD>
Sometimes programs may depend on different things depending on the USE
variable.  Portage offers a few options to handle this.  Note that when
using the following syntaxes, each case is considered as 1 Atom in the
scope it appears.  That means that each Atom both conditionally include
multiple Atoms and be nested to an infinite depth.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>usevar? ( DEPEND Atom )</B>

<DD>
To include the jpeg library when the user has jpeg in <B>USE</B>, simply use the
following syntax:
<BR>

<B>jpeg? ( media-libs/jpeg )</B>

<DT><B>!usevar? ( Atom )</B>

<DD>
If you want to include a package only if the user does not have a certain option
in their <B>USE</B> variable, then use the following syntax:
<BR>

<B>!nophysfs? ( dev-games/physfs )</B>

<BR>

This is often useful for those times when you want to want to add optional support
for a feature and have it enabled by default.
<DT><B>usevar? ( Atom if true ) !usevar? ( Atom if false )</B>

<DD>
For functionality like the tertiary operator found in C you must use
two statements, one normal and one inverted.  If a package uses
GTK2 or GTK1, but not both, then you can handle that like this:
<BR>

<B>gtk2? ( =x11-libs/gtk+-2* ) !gtk2? ( =x11-libs/gtk+-1* )</B>

<BR>

That way the default is the superior GTK2 library.
<DT><B>|| ( Atom Atom ... )</B>

<DD>
When a package can work with a few different packages but a virtual is not 
appropriate, this syntax can easily be used.
<PRE>
<B>|| (</B>
<B>app-games/unreal-tournament</B>
<B>app-games/unreal-tournament-goty</B>
<B>)</B>
</PRE>

Here we see that unreal-tournament has a normal version and it has a goty version.  
Since they provide the same base set of files, another package can use either.  
Adding a virtual is inappropriate due to the small scope of it.
<BR>

Another good example is when a package can be built with multiple video 
interfaces, but it can only ever have just one.
<PRE>
<B>|| (</B>
<B>sdl? ( media-libs/libsdl )</B>
<B>svga? ( media-libs/svgalib )</B>
<B>opengl? ( virtual/opengl )</B>
<B>ggi? ( media-libs/libggi )</B>
<B>virtual/x11</B>
<B>)</B>
</PRE>

Here only one of the packages will be chosen, and the order of preference is 
determined by the order in which they appear.  So sdl has the best chance of being 
chosen, followed by svga, then opengl, then ggi, with a default of X if the user 
does not specify any of the previous choices.
</DL>
</DL>

<P>
</DL>
</DL>

<DT><B>RDEPEND</B><DD>
This should contain a list of all packages that are required for this
program to run (aka runtime depend).  If this is not set, then it
defaults to the value of <B>DEPEND</B>.
<BR>

You may use the same syntax to vary dependencies as seen above in <B>DEPEND</B>.
<DT><B>PDEPEND</B><DD>
This should contain a list of all packages that will have to be installed after
the program has been merged.
<BR>

You may use the same syntax to vary dependencies as seen above in <B>DEPEND</B>.
<DT><B>RESTRICT</B> = <I>[strip,mirror,fetch,userpriv]</I><DD>
This should be a space delimited list of portage features to restrict.

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>binchecks</I>

<DD>
Disable all QA checks for binaries (do not use without very good reason).  See
the <B>QA CONTROL VARIABLES</B> section for more specific exemptions.
<DT><I>confcache</I>

<DD>
Prevent econf from using confcache.
<DT><I>fetch</I>

<DD>
like <I>mirror</I> but the files will not be fetched via <B>SRC_URI</B> either.
<DT><I>mirror</I>

<DD>
files in <B>SRC_URI</B> will not be downloaded from the <B>GENTOO_MIRRORS</B>.
<DT><I>primaryuri</I>

<DD>
fetch from URL's in <B>SRC_URI</B> before <B>GENTOO_MIRRORS</B>.
<DT><I>strip</I>

<DD>
final binaries/libraries will not be stripped of debug symbols.
<DT><I>sandbox</I>

<DD>
disable sandbox (do not use without very good reason).
<DT><I>test</I>

<DD>
do not run src_test even if user has <B>FEATURES</B>=test.
<DT><I>userpriv</I>

<DD>
Disables userpriv for specific packages.
</DL>
</DL>


<DT><B>PROVIDE</B> = <I>&quot;virtual/TARGET&quot;</I><DD>
This variable should only be used when a package provides a virtual target.
For example, blackdown-jdk and sun-jdk provide <I>virtual/jdk</I>.  This
allows for packages to depend on <I>virtual/jdk</I> rather than on blackdown
or sun specifically.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>QA CONTROL VARIABLES</H2>

<DL COMPACT>
<DT><B>USAGE NOTES</B>

<DD>
Several QA variables are provided which allow an ebuild to manipulate some
of the QA checks performed by portage.  Use of these variables in ebuilds
should be kept to an absolute minimum otherwise they defeat the purpose
of the QA checks, and their use is subject to agreement of the QA team.
They are primarily intended for use by ebuilds that install closed-source
binary objects that cannot be altered.
<BR>

Note that objects that violate these rules may fail on some architectures.
<DT><B>QA_TEXTRELS</B><DD>
This variable can be set to a list of file paths, relative to the image
directory, of files that contain text relocations that cannot be eliminated.
The paths may contain regular expressions.
<BR>

This variable is intended to be used on closed-source binary objects that
cannot be altered.
<DT><B>QA_EXECSTACK</B><DD>
This should contain a list of file paths, relative to the image directory, of
objects that require executable stack in order to run.
The paths may contain regular expressions.
<BR>

This variable is intended to be used on objects that truly need executable
stack (i.e. not those marked to need it which in fact do not).
<DT><B>QA_WX_LOAD</B><DD>
This should contain a list of file paths, relative to the image directory, of
files that contain writable and executable segments.  These are rare.
The paths may contain regular expressions.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>PORTAGE DECLARATIONS</H2>

<DL COMPACT>
<DT><B>inherit</B>

<DD>
Inherit is portage's maintainance of extra classes of functions that are 
external to ebuilds and provided as inheritable capabilities and data. They 
define functions and set data types as drop-in replacements, expanded, and 
simplified routines for extremely common tasks to streamline the build 
process.  Inherit may only be called once in an ebuild and it may <B>never be 
wrapped within any conditionals</B> of any kind.  Specification of the eclasses 
contains only their name and not the <I>.eclass</I> extention.  Also note that 
the inherit statement must come before other variable declarations.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>FUNCTIONS</H2>

<DL COMPACT>
<DT><B>pkg_nofetch</B>

<DD>
If you turn on <I>fetch</I> in <B>RESTRICT</B>, then this function will be
run when the files in <B>SRC_URI</B> cannot be found.  Useful for
displaying information to the user on *how* to obtain said files.  All 
you have to do is output a message and let the function return.  Do not 
end the function with a call to <B>die</B>.
<DT><B>pkg_setup</B>

<DD>
This function can be used if the package needs specific setup actions or
checks to be preformed before anything else.
<BR>

Initial working directory of ${PORTAGE_TMPDIR}.
<DT><B>src_unpack</B>

<DD>
This function is used to unpack all the sources in <I>A</I> to <I>WORKDIR</I>.
If not defined in the <I>ebuild script</I> it calls <I>unpack ${A}</I>. Any
patches and other pre configure/compile modifications should be done here.
<BR>

Initial working directory of $WORKDIR.
<DT><B>src_compile</B>

<DD>
All necessary steps for configuration and compilation should be done in here.
<BR>

Initial working directory of $S.
<DT><B>src_test</B>

<DD>
Run all package specific test cases.  The default is to run 'make check' 
followed 'make test'.
<BR>

Initial working directory of $S.
<DT><B>src_install</B>

<DD>
Should contain everything required to install the package in the temporary
<I>install directory</I>.
<BR>

Initial working directory of $S.
<DT><B>pkg_preinst pkg_postinst</B>

<DD>
All modifications required on the live-filesystem before and after the
package is merged should be placed here. Also commentary for the user
should be listed here as it will be displayed last.
<BR>

Initial working directory of $PWD.
<DT><B>pkg_prerm pkg_postrm</B>

<DD>
Like the pkg_*inst functions but for unmerge.
<BR>

Initial working directory of $PWD.
<DT><B>pkg_config</B>

<DD>
This function should contain optional basic configuration steps.
<BR>

Initial working directory of $PWD.
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>HELPER FUNCTIONS: GENERAL</H2>

<DL COMPACT>
<DT><B>die</B> <I>[reason]</I><DD>
Causes the current emerge process to be aborted. The final display will
include <I>reason</I>.
<DT><B>use</B> <I>&lt;USE item&gt;</I><DD>
If <I>USE item</I> is in the <B>USE</B> variable, the function will silently 
return 0 (aka shell true).  If <I>USE item</I> is not in the <B>USE</B> 
variable, the function will silently return 1 (aka shell false).  <B>usev</B> 
is a verbose version of <B>use</B>.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Example:</I>

<DD>
<PRE>
if use gnome ; then
        guiconf=&quot;--enable-gui=gnome --with-x&quot;
elif use gtk ; then
        guiconf=&quot;--enable-gui=gtk --with-x&quot;
elif use X ; then
        guiconf=&quot;--enable-gui=athena --with-x&quot;
else
        # No gui version will be built
        guiconf=&quot;&quot;
fi
</PRE>

</DL>
</DL>

<DT><B>use_with</B> <I>&lt;USE item&gt;</I> <I>[configure name]</I> <I>[configure opt]</I><DD>
Useful for creating custom options to pass to a configure script. If <I>USE 
item</I> is in the <B>USE</B> variable and a <I>configure opt</I> is specified, 
then the string <I>--with-[configure name]=[configure opt]</I> will be echoed.  
If <I>configure opt</I> is not specified, then just <I>--with-[configure 
name]</I> will be echoed.  If <I>USE item</I> is not in the <B>USE</B> variable, 
then the string <I>--without-[configure name]</I> will be echoed. If 
<I>configure name</I> is not specified, then <I>USE item</I> will be used in 
its place.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Examples:</I>

<DD>
<PRE>
USE=&quot;opengl&quot;
myconf=$(use_with opengl)
(myconf now has the value &quot;--with-opengl&quot;)

USE=&quot;jpeg&quot;
myconf=$(use_with jpeg libjpeg)
(myconf now has the value &quot;--with-libjpeg&quot;)

USE=&quot;&quot;
myconf=$(use_with jpeg libjpeg)
(myconf now has the value &quot;--without-libjpeg&quot;)

USE=&quot;sdl&quot;
myconf=$(use_with sdl SDL all-plugins)
(myconf now has the value &quot;--with-SDL=all-plugins&quot;)
</PRE>

</DL>
</DL>

<DT><B>use_enable</B> <I>&lt;USE item&gt;</I> <I>[configure name]</I> <I>[configure opt]</I><DD>
Same as <B>use_with</B> above, except that the configure options are 
<I>--enable-</I> instead of <I>--with-</I> and <I>--disable-</I> instead of 
<I>--without-</I>.
<DT><B>has</B> <I>&lt;item&gt;</I> <I>&lt;item list&gt;</I><DD>
If <I>item</I> is in <I>item list</I>, then <I>item</I> is echoed and <B>has</B>
returns 0.  Otherwise, nothing is echoed and 1 is returned. As indicated with
use, there is a non-echoing version <B>hasq</B>. Please use <B>hasq</B> in all
places where output is to be disregarded. Never use the output for calculation.
<BR>

The <I>item list</I> is delimited by the <I>IFS</I> variable.  This variable
has a default value of ' ', or a space.  It is a <B><A HREF="http://localhost/cgi-bin/man/man2html?1+bash">bash</A></B>(1) setting.
<DT><B>has_version</B> <I>&lt;category/package-version&gt;</I><DD>
Check to see if <I>category/package-version</I> is installed on the system.
The parameter accepts all values that are acceptable in the <B>DEPEND</B>
variable.  The function returns 0 if <I>category/package-version</I> is
installed, 1 otherwise.
<DT><B>best_version</B> <I>&lt;package name&gt;</I><DD>
This function will look up <I>package name</I> in the database of currently
installed programs and echo the &quot;best version&quot; of the package that is
currently installed. 
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Example:</I>

<DD>
VERINS=&quot;$(best_version net-ftp/glftpd)&quot;
<BR>

(VERINS now has the value &quot;net-ftp/glftpd-1.27&quot; if glftpd-1.27 is installed)
</DL>
</DL>

</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>HELPER FUNCTIONS: OUTPUT</H2>

<DL COMPACT>
<DT><B>einfo</B> <I>&quot;informative message&quot;</I><DD>
If you need to display an message that you wish the user to read and take 
notice of, then use <B>einfo</B>.  It works just like <B><A HREF="http://localhost/cgi-bin/man/man2html?1+echo">echo</A></B>(1), but 
adds a little more to the output so as to catch the user's eye.
<DT><B>ewarn</B> <I>&quot;warning message&quot;</I><DD>
Same as <B>einfo</B>, but should be used when showing a warning to the user.
<DT><B>eerror</B> <I>&quot;error message&quot;</I><DD>
Same as <B>einfo</B>, but should be used when showing an error to the user.
<DT><B>ebegin</B> <I>&quot;helpful message&quot;</I><DD>
Like <B>einfo</B>, we output a <I>helpful message</I> and then hint that the 
following operation may take some time to complete.  Once the task is 
finished, you need to call <B>eend</B>.
<DT><B>eend</B> <I>&lt;status&gt;</I> <I>[&quot;error message&quot;]</I><DD>
Followup the <B>ebegin</B> message with an appropriate &quot;OK&quot; or &quot;!!&quot; (for 
errors) marker.  If <I>status</I> is non-zero, then the additional <I>error 
message</I> is displayed.
</DL>
<A NAME="lbAK">&nbsp;</A>
<H2>HELPER FUNCTIONS: UNPACK</H2>

<DL COMPACT>
<DT><B>unpack</B> <I>&lt;source&gt;</I> <I>[list of more sources]</I><DD>
This function uncompresses and/or untars a list of sources into the current
directory. The function will append <I>source</I> to the <B>DISTDIR</B> variable.
</DL>
<A NAME="lbAL">&nbsp;</A>
<H2>HELPER FUNCTIONS: COMPILE</H2>

<DL COMPACT>
<DT><B>econf</B> <I>[configure options]</I><DD>
This is used as a replacement for configure.  Performs:
<PRE>
configure \
        --prefix=/usr \
        --host=${CHOST} \
        --mandir=/usr/share/man \
        --infodir=/usr/share/info \
        --datadir=/usr/share \
        --sysconfdir=/etc \
        --localstatedir=/var/lib \
        <I>${EXTRA_ECONF}</I> \
        <I>configure options</I>
</PRE>

Note that the <I>EXTRA_ECONF</I> is for users only, not for ebuild 
writers.  If you wish to pass more options to configure, just pass the 
extra arguements to <B>econf</B>.
<DT><B>emake</B> <I>[make options]</I><DD>
This is used as a replacement for make.  Performs 'make ${MAKEOPTS} 
<I>make options</I>' (as set in /etc/make.globals), default is MAKEOPTS=&quot;-j2&quot;.
<P>
<B>***warning***</B>
<BR>

if you are going to use <B>emake</B>, make sure your build is happy with
parallel makes (make -j2).  It should be tested thoroughly as parallel
makes are notorious for failing _sometimes_ but not always.  If you determine 
that your package fails to build in parallel, and you are unable to resolve 
the issue, then you should run '<B>emake</B> -j1' instead of 'make'.
</DL>
<A NAME="lbAM">&nbsp;</A>
<H2>HELPER FUNCTIONS: INSTALL</H2>

<DL COMPACT>
<DT><B>einstall</B> <I>[make options]</I><DD>
This is used as a replacement for make install.  Performs:
<PRE>
make \
        prefix=${D}/usr \
        datadir=${D}/usr/share \
        infodir=${D}/usr/share/info \
        localstatedir=${D}/var/lib \
        mandir=${D}/usr/share/man \
        sysconfdir=${D}/etc \
        <I>${EXTRA_EINSTALL}</I> \
        <I>make options</I> \
        install
</PRE>

Please do <B>not</B> use this in place of 'make install DESTDIR=${D}'.  
That is the preferred way of installing make-based packages.  Also, do 
not utilize the <I>EXTRA_EINSTALL</I> variable since it is for users.
<P>

<DT><B>prepall</B>

<DD>
<DT><B>prepalldocs</B>

<DD>
<DT><B>prepallinfo</B>

<DD>
<DT><B>prepallman</B>

<DD>
<DT><B>prepallstrip</B>

<DD>

Useful for when a package installs into <B>${D}</B> via scripts
(i.e. makefiles).  If you want to be sure that libraries are executable,
aclocal files are installed into the right place, doc/info/man files are
all compressed, and that executables are all stripped of debugging symbols,
then use these suite of functions.
<DL COMPACT><DT><DD>

<DL COMPACT>
<DT><B>prepall:</B>

<DD>
Runs <B>prepallman</B>, <B>prepallinfo</B>, <B>prepallstrip</B>, sets
libraries +x, and then checks aclocal directories.  Please note this
does <I>*not*</I> run <B>prepalldocs</B>.
<DT><B>prepalldocs:</B>

<DD>
Compresses all doc files in ${D}/usr/share/doc.
<DT><B>prepallinfo:</B>

<DD>
Compresses all info files in ${D}/usr/share/info.
<DT><B>prepallman:</B>

<DD>
Compresses all man files in ${D}/usr/share/man.
<DT><B>prepallstrip:</B>

<DD>
Strips all executable files of debugging symboles.  This includes libraries.
</DL>
</DL>

<P>
<DT><B>prepinfo</B> <I>[dir]</I><DD>
<DT><B>prepman</B> <I>[dir]</I><DD>
<DT><B>prepstrip</B> <I>[dir]</I><DD>

Similiar to the <B>prepall</B> functions, these are subtle in their differences.
<DL COMPACT><DT><DD>

<DL COMPACT>
<DT><B>prepinfo:</B>

<DD>
If a <I>dir</I> is not specified, then <B>prepinfo</B> will assume the dir
<I>usr</I>. <B>prepinfo</B> will then compress all the files in
${D}/<I>dir</I>/info.
<DT><B>prepman:</B>

<DD>
If a <I>dir</I> is not specified, then <B>prepman</B> will assume the dir
<I>usr</I>. <B>prepman</B> will then compress all the files in
${D}/<I>dir</I>/man/*/.
<DT><B>prepstrip:</B>

<DD>
All the files found in ${D}/<I>dir</I> will be stripped.  You may specify
multiple directories.
</DL>
</DL>


<DT><B>dopython</B> <I>&lt;commands&gt;</I><DD>
Performs <I>commands</I> with python and returns the result.
<DT><B>dosed</B> <I>&quot;s:orig:change:g&quot; &lt;filename&gt;</I><DD>
Performs sed (including cp/mv <I>filename</I>) on <I>filename</I>.
<BR>

<B>'dosed&nbsp;s:/usr/local:/usr:g&nbsp;/usr/bin/some-script'</B>

runs sed on ${D}/usr/bin/some-script
<DT><B>dodir</B> <I>&lt;path&gt;</I><DD>
Creates a directory inside of ${D}.
<BR>

<B>'dodir&nbsp;/usr/lib/apache'</B>

creates ${D}/usr/lib/apache.  Note that the do* functions will run 
<B>dodir</B> for you.
<DT><B>diropts</B> <I>[options for <A HREF="http://localhost/cgi-bin/man/man2html?1+install">install</A>(1)]</I><DD>
Can be used to define options for the install function used in
<B>dodir</B>.  The default is <I>-m0755</I>.
<DT><B>into</B> <I>&lt;path&gt;</I><DD>
Sets the root (<I>DESTTREE</I>) for other functions like <B>dobin</B>,
<B>dosbin</B>, <B>doman</B>, <B>doinfo</B>, <B>dolib</B>.
<BR>

The default root is /usr.
<DT><B>keepdir</B> <I>&lt;path&gt;</I><DD>
Tells portage to leave a directory behind even if it is empty.  Functions
the same as <B>dodir</B>.
<DT><B>dobin</B> <I>&lt;binary&gt; [list of more binaries]</I><DD>
Installs a <I>binary</I> or a list of binaries into <I>DESTTREE</I>/bin.
Creates all necessary dirs.
<DT><B>dosbin</B> <I>&lt;binary&gt; [list of more binaries]</I><DD>
Installs a <I>binary</I> or a list of binaries into <I>DESTTREE</I>/sbin.
Creates all necessary dirs.
<DT><B>doinitd</B> <I>&lt;init.d script&gt; [list of more init.d scripts]</I><DD>
Install Gentoo <I>init.d scripts</I>.  They will be installed into the 
correct location for Gentoo init.d scripts (/etc/init.d/).  Creates all 
necessary dirs.
<DT><B>doconfd</B> <I>&lt;conf.d file&gt; [list of more conf.d file]</I><DD>
Install Gentoo <I>conf.d files</I>.  They will be installed into the 
correct location for Gentoo conf.d files (/etc/conf.d/).  Creates all 
necessary dirs.
<DT><B>doenvd</B> <I>&lt;env.d entry&gt; [list of more env.d entries]</I><DD>
Install Gentoo <I>env.d entries</I>.  They will be installed into the 
correct location for Gentoo env.d entries (/etc/env.d/).  Creates all 
necessary dirs.
<P>

<DT><B>dolib</B> <I>&lt;library&gt;</I> <I>[list of more libraries]</I><DD>
<DT><B>dolib.a</B> <I>&lt;library&gt;</I> <I>[list of more libraries]</I><DD>
<DT><B>dolib.so</B> <I>&lt;library&gt;</I> <I>[list of more libraries]</I><DD>

Installs a library or a list of libraries into <I>DESTTREE</I>/lib.
Creates all necessary dirs.
<DT><B>libopts</B> <I>[options for <A HREF="http://localhost/cgi-bin/man/man2html?1+install">install</A>(1)]</I><DD>
Can be used to define options for the install function used in
the <B>dolib</B> functions.  The default is <I>-m0644</I>.
<DT><B>doman</B> <I>[-i18n=&lt;locale&gt;]</I> <I>&lt;man-page&gt; [list of more man-pages]</I><DD>
Installs manual-pages into /usr/share/man/man[0-9n] depending on the
manual file ending.  The files are compressed if they are not already.  You 
can specify locale-specific manpages with the <I>-i18n</I> option.  Then the
man-page will be installed into /usr/share/man/<I>&lt;locale&gt;</I>/man[0-9n].

<DT><B>dohard</B> <I>&lt;filename&gt; &lt;linkname&gt;</I><DD>
<DT><B>dosym</B> <I>&lt;filename&gt; &lt;linkname&gt;</I><DD>

Performs the ln command as either a hard link or symlink.
<DT><B>dohtml</B> <I> [-a filetypes] [-r] [-x list-of-dirs-to-ignore] [list-of-files-and-dirs]</I><DD>
Installs the files in the list of files (space-separated list) into
/usr/share/doc/${PF}/html provided the file ends in .html, .png, .js, .jpg,
or .css.  Setting <I>-a</I> limits what types of files will be included,
<I>-A</I> appends to the default list, setting <I>-x</I> sets which dirs to
exclude (CVS excluded by default), <I>-r</I> sets recursive.
<DT><B>doinfo</B> <I>&lt;info-file&gt; [list of more info-files]</I><DD>
Installs info-pages into <I>DESTDIR</I>/info.  Files are automatically
gzipped.  Creates all necessary dirs.
<DT><B>dojar</B> <I>&lt;jar file&gt; [list of more jar files]</I><DD>
Installs jar files into /usr/share/${PN}/lib and adds them to
/usr/share/${PN}/classpath.env.
<DT><B>domo</B> <I>&lt;locale-file&gt; [list of more locale-files] </I><DD>
Installs locale-files into <I>DESTDIR</I>/usr/share/locale/[LANG]
depending on local-file's ending.  Creates all necessary dirs.
<P>

<DT><B>fowners</B> <I>&lt;permissions&gt; &lt;file&gt; [files]</I><DD>
<DT><B>fperms</B> <I>&lt;permissions&gt; &lt;file&gt; [files]</I><DD>

Performs chown (<B>fowners</B>) or chmod (<B>fperms</B>), applying
<I>permissions</I> to <I>files</I>.
<DT><B>insinto</B> <I>[path]</I><DD>
Sets the root (<I>INSDESTTREE</I>) for the <B>doins</B> function.
<BR>

The default root is /.
<DT><B>insopts</B> <I>[options for <A HREF="http://localhost/cgi-bin/man/man2html?1+install">install</A>(1)]</I><DD>
Can be used to define options for the install function used in
<B>doins</B>.  The default is <I>-m0644</I>.
<DT><B>doins</B> <I>&lt;file&gt; [list of more files]</I><DD>
Installs files into <I>INSDESTTREE</I>.  This function uses <B><A HREF="http://localhost/cgi-bin/man/man2html?1+install">install</A></B>(1).  
Creates all necessary dirs.
<DT><B>exeinto</B> <I>[path]</I><DD>
Sets the root (<I>EXEDESTTREE</I>) for the <B>doexe</B> function.
<BR>

The default root is /.
<DT><B>exeopts</B> <I>[options for <A HREF="http://localhost/cgi-bin/man/man2html?1+install">install</A>(1)]</I><DD>
Can be used to define options for the install function used in <B>doexe</B>.
The default is <I>-m0755</I>.
<DT><B>doexe</B> <I>&lt;executable&gt; [list of more executables]</I><DD>
Installs a executable or a list of executable into <I>EXEDESTTREE</I>.
This function uses <B><A HREF="http://localhost/cgi-bin/man/man2html?1+install">install</A></B>(1).  Creates all necessary dirs.
<DT><B>docinto</B> <I>[path]</I><DD>
Sets the relative subdir (<I>DOCDESTTREE</I>) used by <B>dodoc</B>.
<DT><B>dodoc</B> <I>&lt;document&gt; [list of more documents]</I><DD>
Installs a document or a list of document into /usr/share/doc/${PF}/<I>DOCDESTTREE</I>.
Files are automatically gzipped.  Creates all necessary dirs.
<P>

<DT><B>newbin</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newsbin</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newinitd</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newconfd</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newenvd</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newlib</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newlib.so</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newlib.a</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newman</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newinfo</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newins</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newexe</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>
<DT><B>newdoc</B> <I>&lt;old file&gt; &lt;new filename&gt;</I><DD>

All these functions act like the do* functions, but they only work with one
file and the file is installed as <I>[new filename]</I>.
</DL>
<A NAME="lbAN">&nbsp;</A>
<H2>REPORTING BUGS</H2>

Please report bugs via <A HREF="http://bugs.gentoo.org/">http://bugs.gentoo.org/</A>
<A NAME="lbAO">&nbsp;</A>
<H2>AUTHORS</H2>

<PRE>
Achim Gottinger &lt;<A HREF="mailto:achim@gentoo.org">achim@gentoo.org</A>&gt;
Mark Guertin &lt;<A HREF="mailto:gerk@gentoo.org">gerk@gentoo.org</A>&gt;
Nicholas Jones &lt;<A HREF="mailto:carpaski@gentoo.org">carpaski@gentoo.org</A>&gt;
Mike Frysinger &lt;<A HREF="mailto:vapier@gentoo.org">vapier@gentoo.org</A>&gt;
</PRE>

<A NAME="lbAP">&nbsp;</A>
<H2>FILES</H2>

<DL COMPACT>
<DT>The <I>/usr/sbin/ebuild.sh</I> script.<DD>
<DT>The helper apps in <I>/usr/lib/portage/bin</I>.<DD>
<DT><B>/etc/make.conf</B> <DD>
Contains variables for the build-process and overwrites those in make.defaults.
<DT><B>/etc/make.globals</B><DD>
Contains the default variables for the build-process, you should edit
<I>/etc/make.conf</I> instead.
</DL>
<A NAME="lbAQ">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="http://localhost/cgi-bin/man/man2html?1+ebuild">ebuild</A></B>(1),

<B><A HREF="http://localhost/cgi-bin/man/man2html?5+make.conf">make.conf</A></B>(5)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">DESCRIPTION</A><DD>
<DT><A HREF="#lbAD">EXAMPLES</A><DD>
<DT><A HREF="#lbAE">VARIABLES</A><DD>
<DT><A HREF="#lbAF">QA CONTROL VARIABLES</A><DD>
<DT><A HREF="#lbAG">PORTAGE DECLARATIONS</A><DD>
<DT><A HREF="#lbAH">FUNCTIONS</A><DD>
<DT><A HREF="#lbAI">HELPER FUNCTIONS: GENERAL</A><DD>
<DT><A HREF="#lbAJ">HELPER FUNCTIONS: OUTPUT</A><DD>
<DT><A HREF="#lbAK">HELPER FUNCTIONS: UNPACK</A><DD>
<DT><A HREF="#lbAL">HELPER FUNCTIONS: COMPILE</A><DD>
<DT><A HREF="#lbAM">HELPER FUNCTIONS: INSTALL</A><DD>
<DT><A HREF="#lbAN">REPORTING BUGS</A><DD>
<DT><A HREF="#lbAO">AUTHORS</A><DD>
<DT><A HREF="#lbAP">FILES</A><DD>
<DT><A HREF="#lbAQ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 15:48:15 GMT, June 04, 2006
</BODY>
</HTML>
